# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                     CONFIGURACIÓN: LOCALHOST                               ║
# ║                    Entorno de Desarrollo Local                             ║
# ╚════════════════════════════════════════════════════════════════════════════╝
#
# PROPÓSITO:
# Este entorno es para desarrollo local en tu máquina.
# Usa Docker Compose para levantar servicios localmente.
#
# USO:
# ./deploy/deploy.sh --env localhost --deploy
# ./deploy/deploy.sh --env localhost --restart
# ./deploy/deploy.sh --env localhost --logs
#
# ════════════════════════════════════════════════════════════════════════════

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ INFORMACIÓN BÁSICA                                                         │
# └────────────────────────────────────────────────────────────────────────────┘

ENV_NAME="localhost"
ENV_TYPE="local"                    # Ejecuta comandos localmente
ENV_DESCRIPTION="Desarrollo Local"
ENV_COLOR="blue"                    # Azul para desarrollo

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ SSH (No aplica para localhost)                                            │
# └────────────────────────────────────────────────────────────────────────────┘

SSH_ENABLED=false                   # No se usa SSH en local

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ GIT                                                                        │
# └────────────────────────────────────────────────────────────────────────────┘

GIT_ENABLED=true
GIT_AUTO_COMMIT=false               # Pedir confirmación antes de commit
GIT_AUTO_PUSH=false                 # Pedir confirmación antes de push
GIT_BRANCH="main"                   # Rama principal

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ DOCKER                                                                     │
# └────────────────────────────────────────────────────────────────────────────┘

DOCKER_ENABLED=true
DOCKER_COMPOSE_FILE="docker-compose.dev.yml"  # Archivo para desarrollo
DOCKER_PROJECT_NAME="paquetex_dev"            # Prefijo de contenedores
DOCKER_REBUILD_ON_DEPLOY=false                # No rebuild (más rápido)
DOCKER_PULL_BEFORE_DEPLOY=false               # Usar imágenes locales

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ RUTAS                                                                      │
# └────────────────────────────────────────────────────────────────────────────┘

PROJECT_PATH="."                              # Directorio actual
BACKUP_PATH="./backups/localhost"            # Backups locales

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ SERVICIOS                                                                  │
# └────────────────────────────────────────────────────────────────────────────┘

SERVICES=("app" "redis" "postgres")           # Servicios principales
MAIN_SERVICE="app"                            # FastAPI app
OPTIONAL_SERVICES=()                          # Sin servicios opcionales

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ URLs                                                                       │
# └────────────────────────────────────────────────────────────────────────────┘

BASE_URL="http://localhost:8000"
HEALTH_CHECK_URL="http://localhost:8000/health"
API_URL="http://localhost:8000/api"

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ HEALTH CHECK                                                               │
# └────────────────────────────────────────────────────────────────────────────┘

HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=30             # 30s suficiente para local
HEALTH_CHECK_RETRIES=10             # 10 intentos
HEALTH_CHECK_INTERVAL=2             # Cada 2 segundos

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ MIGRACIONES                                                                │
# └────────────────────────────────────────────────────────────────────────────┘

MIGRATIONS_ENABLED=true
MIGRATIONS_AUTO=false               # Pedir confirmación
MIGRATIONS_COMMAND="docker compose -f docker-compose.dev.yml exec app alembic upgrade head"
MIGRATIONS_ROLLBACK_COMMAND="docker compose -f docker-compose.dev.yml exec app alembic downgrade -1"

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ BACKUP                                                                     │
# └────────────────────────────────────────────────────────────────────────────┘

BACKUP_ENABLED=true
BACKUP_AUTO_BEFORE_DEPLOY=false     # No backup automático (desarrollo)
BACKUP_DB_COMMAND="docker compose -f docker-compose.dev.yml exec -T postgres pg_dump -U postgres paqueteria"
BACKUP_RETENTION_DAYS=7             # Mantener 7 días

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ TESTS                                                                      │
# └────────────────────────────────────────────────────────────────────────────┘

TESTS_ENABLED=false                 # Deshabilitado por defecto
TESTS_COMMAND="docker compose -f docker-compose.dev.yml exec app pytest"
TESTS_REQUIRED=false                # No obligatorios

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ HOOKS                                                                      │
# └────────────────────────────────────────────────────────────────────────────┘

PRE_DEPLOY_HOOK=""                  # Sin hooks en desarrollo
POST_DEPLOY_HOOK=""
PRE_BACKUP_HOOK=""
POST_BACKUP_HOOK=""

# ┌────────────────────────────────────────────────────────────────────────────┐
# │ NOTIFICACIONES                                                             │
# └────────────────────────────────────────────────────────────────────────────┘

NOTIFY_ON_SUCCESS=false             # Sin notificaciones en local
NOTIFY_ON_ERROR=false

# ════════════════════════════════════════════════════════════════════════════
# NOTAS:
# - Este entorno es para desarrollo rápido
# - No requiere SSH ni configuración compleja
# - Los cambios se reflejan inmediatamente
# - Usa: ./deploy/deploy.sh --env localhost --deploy
# ════════════════════════════════════════════════════════════════════════════
